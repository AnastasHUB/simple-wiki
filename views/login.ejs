<% title = t('login.title'); %>
<h1><%= t('login.heading') %></h1>
<% if (typeof bannedAccountInfo !== 'undefined' && bannedAccountInfo) { %>
  <div class="card alert alert-error">
    <p><strong><%= t('login.banned.heading') %></strong></p>
    <% if (bannedAccountInfo.reason) { %>
      <p><%= t('login.banned.reason', { reason: bannedAccountInfo.reason }) %></p>
    <% } %>
    <% if (bannedAccountInfo.bannedAt) { %>
      <% const locale = (lang === 'en') ? 'en-US' : 'fr-FR'; %>
      <p><%= t('login.banned.since', { date: new Date(bannedAccountInfo.bannedAt).toLocaleString(locale) }) %></p>
    <% } %>
  </div>
<% } %>
<% if (typeof error !== 'undefined') { %>
  <div class="card"><%= error %></div>
<% } %>
<form method="post" action="/login">
  <%- include('partials/csrf_field') %>
  <label><%= t('login.fields.username') %></label>
  <input type="text" name="username" required />
  <label><%= t('login.fields.password') %></label>
  <input type="password" name="password" required />
  <div class="actions">
    <button class="btn success" data-icon="🔑"><%= t('login.actions.submit') %></button>
    <button class="btn secondary" type="button" data-passkey-login data-icon="🔐">
      <%= t('login.actions.passkey') %>
    </button>
  </div>
</form>
<p class="form-help text-muted">
  <%= t('login.help.passkeyRequirement') %>
</p>
<% if (typeof registrationEnabled === 'undefined' || registrationEnabled) { %>
  <p class="form-help">
    <%= t('login.help.noAccount') %> <a href="/register"><%= t('login.help.createAccountLink') %></a>.
  </p>
<% } %>
<p class="form-help text-muted" data-passkey-helper hidden>
  <%= t('login.help.passkeyUnsupported') %>
</p>
