<% title = 'Import / Export'; %>
<h1>Import / Export de données</h1>
<section class="card">
  <h2>Exporter des données</h2>
  <form method="post" action="/admin/data/export" class="data-portability-form">
    <p>
      Sélectionnez les types de données à inclure dans l'export. Par défaut, toutes les données
      disponibles seront téléchargées dans un fichier JSON (version <%= version %>).
    </p>
    <div class="data-selection-mode">
      <label>
        <input type="radio" name="selectionMode" value="all" checked />
        Tout exporter
      </label>
      <label>
        <input type="radio" name="selectionMode" value="custom" />
        Choisir des types spécifiques
      </label>
    </div>
    <ul class="data-type-list">
      <% dataTypes.forEach((type) => { %>
        <li>
          <label>
            <input type="checkbox" name="types" value="<%= type.key %>" />
            <span class="data-type-label"><%= type.label %></span>
            <span class="data-type-description"><%= type.description %></span>
          </label>
        </li>
      <% }) %>
    </ul>
    <div class="actions">
      <button type="submit" class="btn primary" data-icon="⬇️">Exporter</button>
    </div>
  </form>
</section>

<section class="card">
  <h2>Importer des données</h2>
  <form
    method="post"
    action="/admin/data/import"
    enctype="multipart/form-data"
    class="data-portability-form"
  >
    <p>Envoyez un fichier exporté précédemment pour mettre à jour les données du wiki.</p>
    <label class="file-input-label" for="importFile">Fichier JSON</label>
    <input id="importFile" type="file" name="import_file" accept="application/json,.json" required />
    <span class="field-hint">La taille maximale autorisée est de 5&nbsp;Mo.</span>
    <div class="data-selection-mode">
      <label>
        <input type="radio" name="selectionMode" value="all" checked />
        Importer tous les types disponibles
      </label>
      <label>
        <input type="radio" name="selectionMode" value="custom" />
        Limiter l'import à certains types
      </label>
    </div>
    <ul class="data-type-list">
      <% dataTypes.forEach((type) => { %>
        <li>
          <label>
            <input type="checkbox" name="types" value="<%= type.key %>" />
            <span class="data-type-label"><%= type.label %></span>
            <span class="data-type-description"><%= type.description %></span>
          </label>
        </li>
      <% }) %>
    </ul>
    <div class="actions">
      <button type="submit" class="btn success" data-icon="⬆️">Importer</button>
    </div>
  </form>
</section>
