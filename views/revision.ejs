<% title = `RÃ©vision ${revision.revision} Â· ${page.title}`; %>
<div class="card">
  <h1>RÃ©vision #<%= revision.revision %> de Â«Â <%= page.title %>Â Â»</h1>
  <p><strong>Titre enregistrÃ© :</strong> <%= revision.title %></p>
  <% const revisionAuthorColor = revision.authorRole && revision.authorRole.color ? revision.authorRole.color : null; %>
  <% const revisionAuthorClasses = ['user-handle', 'revision-author']; %>
  <% const revisionAuthorStyle = revisionAuthorColor && revisionAuthorColor.hasColor ? revisionAuthorColor.style : ''; %>
  <% if (revisionAuthorColor && revisionAuthorColor.hasColor) { revisionAuthorClasses.push('role-colored-text'); revisionAuthorClasses.push(revisionAuthorColor.className); } %>
  <p>
    <strong>Auteur :</strong>
    <strong class="<%= revisionAuthorClasses.join(' ') %>" style="<%= revisionAuthorStyle %>">
      <%= revision.author || 'Inconnu' %>
    </strong>
  </p>
  <p><strong>Horodatage :</strong> <%= revision.created_at %></p>
</div>

<% if (compareOptions && compareOptions.length) { %>
  <div class="card">
    <form method="get" class="form-grid">
      <div>
        <label for="compare"><strong>Comparer avec une autre rÃ©vision :</strong></label>
        <select id="compare" name="compare">
          <% compareOptions.forEach(function(option) { %>
            <option value="<%= option.revision %>" <%= option.isSelected ? 'selected' : '' %>>
              RÃ©vision #<%= option.revision %> â€” <%= option.created_at %>
            </option>
          <% }); %>
        </select>
      </div>
      <div>
        <button class="btn" type="submit" data-icon="ðŸ”„">Mettre Ã  jour la comparaison</button>
      </div>
    </form>
  </div>
<% } %>

<div class="card">
  <h2>Contenu brut</h2>
  <pre class="revision-raw"><code><%= rawContent %></code></pre>
</div>

<div class="card prose">
  <h2>Rendu HTML</h2>
  <div><%- html %></div>
</div>

<% if (diffHtml) { %>
  <div class="card">
    <h2>Diff avec la rÃ©vision #<%= compareRevision.revision %></h2>
    <div class="diff-view"><%- diffHtml %></div>
  </div>
<% } else if (compareOptions && compareOptions.length) { %>
  <div class="card">
    <p>Aucune diffÃ©rence textuelle dÃ©tectÃ©e avec la rÃ©vision sÃ©lectionnÃ©e.</p>
  </div>
<% } %>

<div class="card">
  <a class="btn" data-icon="ðŸ“œ" href="/wiki/<%= page.slug_id %>/history">Retour Ã  l'historique</a>
  <a class="btn" data-icon="ðŸ‘ï¸" href="/wiki/<%= page.slug_id %>">Voir la page actuelle</a>
</div>
