<% title = 'Recherche'; %>
<h1>Résultats pour « <%= q %> »</h1>

<div class="article-grid">
  <% if (!rows.length) { %>
    <div class="card">Aucun résultat.</div>
  <% } %>

  <% rows.forEach(p => { 
       const tags = (p.tagsCsv || '').split(',').filter(Boolean);
  %>
    <div class="card">
      <h3><strong><%= p.title %></strong></h3>
      <% if (p.excerpt) { %>
        <div class="excerpt">
          <div class="excerpt-body"><%- p.excerpt %></div>
        </div>
      <% } %>

      <% if (tags.length) { %>
        <div class="tags-row">
          <% tags.forEach(t => { %>
            <a class="tag" href="/tags/<%= t %>"><%= t %></a>
          <% }) %>
        </div>
      <% } %>

      <div class="actions">
        <a class="btn success" href="/wiki/<%= p.slug_id %>">Ouvrir l’article</a>
        <button class="btn copy"
          onclick="navigator.clipboard.writeText(location.origin + '/wiki/<%= p.slug_id %>')">
          Copier le lien
        </button>
      </div>
    </div>
  <% }) %>
</div>
