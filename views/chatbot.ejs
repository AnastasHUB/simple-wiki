<% title = 'Assistant IA'; %>
<% const isAdmin = chatbot && chatbot.isAdmin; %>

<section class="chatbot" aria-labelledby="chatbotHeading">
  <header class="chatbot-header">
    <h1 id="chatbotHeading">Assistant IA du wiki</h1>
    <p>
      Posez une question sur le contenu du wiki pour obtenir une r√©ponse synth√©tique. La version publique
      exploite uniquement les articles publi√©s et les commentaires approuv√©s. Les administrateurs peuvent activer
      un mode avanc√© couvrant l‚Äôint√©gralit√© de la base de donn√©es.
    </p>
  </header>

  <form class="chatbot-form" data-chatbot-form method="post" action="/chatbot/query">
    <label class="sr-only" for="chatbotQuestion">Question</label>
    <textarea
      id="chatbotQuestion"
      name="message"
      rows="3"
      required
      placeholder="Exemples¬†: Quels sont les derniers articles publi√©s¬†? Comment fonctionne la mod√©ration¬†?"
    ></textarea>

    <div class="chatbot-controls">
      <label for="chatbotVariant">Source de donn√©es</label>
      <select id="chatbotVariant" name="variant">
        <option value="public">Articles + commentaires</option>
        <% if (isAdmin) { %>
          <option value="admin">Mode administrateur (toutes les tables)</option>
        <% } %>
      </select>
      <button class="btn success" type="submit" data-icon="ü§ñ">Interroger l‚Äôassistant</button>
    </div>
  </form>

  <section class="chatbot-results" aria-live="polite" aria-label="R√©ponses de l‚Äôassistant">
    <div class="chatbot-placeholder" data-chatbot-empty>
      <p>Les r√©ponses appara√Ætront ici. Commencez par poser une question √† l‚Äôassistant.</p>
    </div>
    <div class="chatbot-messages" data-chatbot-messages hidden></div>
  </section>
</section>

<script defer src="/public/chatbot.js"></script>
